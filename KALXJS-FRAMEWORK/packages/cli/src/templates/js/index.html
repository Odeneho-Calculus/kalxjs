<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{projectName}}</title>
    <link rel="icon" href="/assets/logo.svg" type="image/svg+xml">
    <meta name="description" content="A modern KalxJS application">
    <meta name="theme-color" content="#4f46e5">

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="{{projectName}}">
    <meta property="og:description" content="A modern KalxJS application">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/assets/logo.svg">

    <!-- Preload critical assets -->
    <link rel="preload" href="/assets/logo.svg" as="image" type="image/svg+xml">

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Modern font loading -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Detect dark mode preference -->
    <script>
        // Check for saved theme preference or use system preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark-theme');
        }
    </script>
</head>

<body>
    <!-- Main application container -->
    <div id="app">
        <!-- Loading state -->
        <div
            style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; gap: 1rem;">
            <img src="/assets/logo.svg" alt="Logo"
                style="width: 80px; height: 80px; animation: pulse 1.5s infinite ease-in-out;">
            <p style="font-family: 'Inter', sans-serif; color: #4f46e5; font-weight: 500;">Loading {{projectName}}...
            </p>
        </div>
        <style>
            @keyframes pulse {
                0% {
                    transform: scale(0.95);
                    opacity: 0.7;
                }

                50% {
                    transform: scale(1.05);
                    opacity: 1;
                }

                100% {
                    transform: scale(0.95);
                    opacity: 0.7;
                }
            }
        </style>
    </div>

    {{#if customRenderer}}
    <!-- Templates for the custom renderer -->
    <template id="welcome-template">
        <!-- Welcome template content is loaded from app/templates/welcome.html -->
    </template>

    <template id="counter-template">
        <!-- Counter template content is loaded from app/templates/counter.html -->
    </template>

    <template id="not-found-template">
        <div class="not-found">
            <h2>Page Not Found</h2>
            <p>The page you are looking for does not exist.</p>
            <a href="#/" data-route="/">Go Home</a>
        </div>
    </template>
    {{/if}}

    <!-- Main script -->
    <script type="module" src="./app/main.js"></script>
</body>

</html>